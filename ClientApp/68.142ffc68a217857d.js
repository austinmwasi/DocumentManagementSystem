"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[68],{2760:(A,v,o)=>{o.d(v,{c:()=>h});const h=[{id:0,name:"Daily"},{id:1,name:"Weekly"},{id:2,name:"Monthly"},{id:3,name:"Quarterly"},{id:4,name:"HalfYearly"},{id:5,name:"Yearly"}]},690:(A,v,o)=>{o.d(v,{v:()=>D});var m=o(520),h=o(1086),g=o(7221),C=o(2760),p=o(5e3),T=o(8032);let D=(()=>{class f{constructor(i,s){this.httpClient=i,this.commonHttpErrorService=s}getUsers(){return this.httpClient.get("user").pipe((0,g.K)(this.commonHttpErrorService.handleError))}getRoles(){return this.httpClient.get("role").pipe((0,g.K)(this.commonHttpErrorService.handleError))}getReminder(i){return this.httpClient.get(`reminder/${i}`).pipe((0,g.K)(this.commonHttpErrorService.handleError))}addDocumentAuditTrail(i){return this.httpClient.post("documentAuditTrail",i)}downloadDocument(i,s){return this.httpClient.get(`document/${i}/download?isVersion=${s}`,{reportProgress:!0,observe:"events",responseType:"blob"})}isDownloadFlag(i,s){return this.httpClient.get(`document/${i}/isDownloadFlag?isPermission=${s}`)}getDocumentToken(i){return this.httpClient.get(`documentToken/${i}/token`)}deleteDocumentToken(i){return this.httpClient.delete(`documentToken/${i}`)}readDocument(i,s){return this.httpClient.get(`document/${i}/readText?isVersion=${s}`)}getReminderFrequency(){return(0,h.of)(C.c)}addDocumentWithAssign(i){var s;i.documentMetaDatas=null===(s=i.documentMetaDatas)||void 0===s?void 0:s.filter(y=>y.metatag);const d=new FormData;return d.append("files",i.files),d.append("name",i.name),d.append("categoryId",i.categoryId),d.append("description",i.description),d.append("documentMetaDataString",JSON.stringify(i.documentMetaDatas)),this.httpClient.post("document/assign",d).pipe((0,g.K)(this.commonHttpErrorService.handleError))}getAllRemindersForCurrentUser(i){const u=(new m.LE).set("Fields",i.fields?i.fields:"").set("OrderBy",i.orderBy?i.orderBy:"").set("PageSize",i.pageSize.toString()).set("Skip",i.skip.toString()).set("SearchQuery",i.searchQuery?i.searchQuery:"").set("subject",i.subject?i.subject:"").set("message",i.message?i.message:"").set("frequency",i.frequency?i.frequency:"");return this.httpClient.get("reminder/all/currentuser",{params:u,observe:"response"})}deleteReminderCurrentUser(i){return this.httpClient.delete(`reminder/${i}/currentuser`)}}return f.\u0275fac=function(i){return new(i||f)(p.LFG(m.eN),p.LFG(T.U))},f.\u0275prov=p.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()},6462:(A,v,o)=>{o.r(v),o.d(v,{NotificationModule:()=>nt});var m=o(9808),h=o(2784),g=o(319),C=o(6087),p=o(4847),T=o(4913),D=o(6787),f=o(3753),N=o(2868),i=o(13),s=o(5778),u=o(2676),d=o(591),y=o(1086),R=o(7221),Z=o(537);class E{constructor(a){this.notificationService=a,this.notificationsSubject=new d.X([]),this.responseHeaderSubject=new d.X(null),this.loadingSubject=new d.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}get count(){return this._count}connect(a){return this.notificationsSubject.asObservable()}disconnect(a){this.notificationsSubject.complete(),this.loadingSubject.complete()}loadNotifications(a){this.loadingSubject.next(!0),this.notificationService.getNotifications(a).pipe((0,R.K)(()=>(0,y.of)([])),(0,Z.x)(()=>this.loadingSubject.next(!1))).subscribe(n=>{const c=JSON.parse(n.headers.get("X-Pagination"));this.responseHeaderSubject.next(c);const r=[...n.body];this._count=r.length,this.notificationsSubject.next(r)})}}var b=o(6927),t=o(5e3),L=o(5769),M=o(1218),O=o(914),l=o(2075),x=o(773),U=o(2925);const j=["input"];function I(e,a){1&e&&(t.TgZ(0,"div",20),t._UZ(1,"mat-spinner"),t.qZA())}function _(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"ACTION")," "))}function Y(e,a){if(1&e){const n=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(n);const r=t.oxw().$implicit,S=t.oxw();return t.KtG(S.viewDocument(r))}),t._UZ(1,"i",25),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"VIEW_DOCUMENT")," "))}function $(e,a){if(1&e&&(t.TgZ(0,"td",22),t.YNc(1,Y,4,3,"button",23),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("ngIf",n.documentId)}}function B(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DATE")," "))}function H(e,a){if(1&e&&(t.TgZ(0,"td",22),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,n.createdDate,"dd/MM/yyyy")," ")}}function Q(e,a){1&e&&(t.TgZ(0,"th",21),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"MESSAGE")," "))}function z(e,a){1&e&&(t.TgZ(0,"span",28),t._uU(1,"new"),t.qZA())}function F(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t._uU(3),t.ALo(4,"translate"),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.hij(" ",n.documentName,""),t.xp6(1),t.hij(" ",t.lcZ(4,2,"DOCUMENT_PERMISSION_GRANTED_TO_YOU")," ")}}function J(e,a){if(1&e&&(t.TgZ(0,"ng-conatainer")(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4),t.qZA()),2&e){const n=t.oxw(2).$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,2,"DOCUMENT_NAME"),""),t.xp6(2),t.hij(" : ",n.documentName," :: ")}}function w(e,a){if(1&e&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._uU(4," :: "),t.YNc(5,J,5,4,"ng-conatainer",27),t._uU(6),t.BQk()),2&e){const n=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"REMINDER")),t.xp6(3),t.Q6J("ngIf",n.documentId),t.xp6(1),t.hij(" ",n.message," ")}}function G(e,a){if(1&e&&(t.TgZ(0,"td",22),t.YNc(1,z,2,0,"span",26),t.YNc(2,F,5,4,"ng-container",27),t.YNc(3,w,7,5,"ng-container",27),t.qZA()),2&e){const n=a.$implicit;t.xp6(1),t.Q6J("ngIf",!n.isRead),t.xp6(1),t.Q6J("ngIf",!n.message),t.xp6(1),t.Q6J("ngIf",n.message)}}function K(e,a){1&e&&t._UZ(0,"tr",29)}function W(e,a){1&e&&t._UZ(0,"tr",30)}function P(e,a){1&e&&(t.TgZ(0,"tr")(1,"td")(2,"div",31)(3,"b"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"NO_DATA_FOUND"),""))}const V=function(){return[10,20,30]},X=[{path:"",component:(()=>{class e extends u.H{constructor(n,c,r,S){super(),this.notificationService=n,this.router=c,this.overlay=r,this.documentService=S,this.notifications=[],this.displayedColumns=["action","createdDate","message"],this.isLoadingResults=!0,this.notificationResource=new T.J,this.notificationResource.pageSize=10,this.notificationResource.orderBy="createdDate desc"}ngOnInit(){this.dataSource=new E(this.notificationService),this.dataSource.loadNotifications(this.notificationResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,D.T)(this.sort.sortChange,this.paginator.page).pipe((0,N.b)(()=>{this.notificationResource.skip=this.paginator.pageIndex,this.notificationResource.pageSize=this.paginator.pageSize,this.notificationResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadNotifications(this.notificationResource)})).subscribe(),this.sub$.sink=(0,f.R)(this.input.nativeElement,"keyup").pipe((0,i.b)(1e3),(0,s.x)(),(0,N.b)(()=>{this.paginator.pageIndex=0,this.notificationResource.skip=0,this.notificationResource.name=this.input.nativeElement.value,this.dataSource.loadNotifications(this.notificationResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(n=>{n&&(this.notificationResource.pageSize=n.pageSize,this.notificationResource.skip=n.skip,this.notificationResource.totalCount=n.totalCount)})}viewDocument(n){this.sub$.sink=this.notificationService.markAsRead(n.id).subscribe(()=>{}),this.sub$.sink=this.documentService.getDocument(n.documentId).subscribe(c=>{const S=c.url.split(".")[1];this.overlay.open(b.Y,{position:"center",origin:"global",panelClass:["file-preview-overlay-container","white-background"],data:{documentId:c.id,name:c.name,extension:S,isRestricted:!1,isVersion:!1}})})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(L.g),t.Y36(h.F0),t.Y36(M.T),t.Y36(O.Z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-notification-list"]],viewQuery:function(n,c){if(1&n&&(t.Gf(C.NW,5),t.Gf(p.YE,5),t.Gf(j,5)),2&n){let r;t.iGM(r=t.CRH())&&(c.paginator=r.first),t.iGM(r=t.CRH())&&(c.sort=r.first),t.iGM(r=t.CRH())&&(c.input=r.first)}},features:[t.qOj],decls:29,vars:17,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-container"],[1,"row","m-2"],[1,"col-md-4"],[1,"form-control",3,"placeholder"],["input",""],["mat-table","","matSort","","matSortActive","createdDate","matSortDirection","desc",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","createdDate"],["matColumnDef","message"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"matNoDataRow"],[3,"length","pageSize","pageSizeOptions"],[1,"loading-shade"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["type","button","class","btn btn-sm btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-sm","btn-success",3,"click"],[1,"las","la-eye"],["class","badge badge-success",4,"ngIf"],[4,"ngIf"],[1,"badge","badge-success"],["mat-header-row",""],["mat-row",""],[1,"pt-2","pl-3"]],template:function(n,c){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()(),t.TgZ(6,"div",3),t.YNc(7,I,2,0,"div",4),t.ALo(8,"async"),t.TgZ(9,"div",5)(10,"div",6)(11,"div",7),t._UZ(12,"input",8,9),t.ALo(14,"translate"),t.qZA()(),t.TgZ(15,"table",10),t.ynx(16,11),t.YNc(17,_,3,3,"th",12),t.YNc(18,$,2,1,"td",13),t.BQk(),t.ynx(19,14),t.YNc(20,B,3,3,"th",12),t.YNc(21,H,3,4,"td",13),t.BQk(),t.ynx(22,15),t.YNc(23,Q,3,3,"th",12),t.YNc(24,G,4,3,"td",13),t.BQk(),t.YNc(25,K,1,0,"tr",16),t.YNc(26,W,1,0,"tr",17),t.YNc(27,P,6,3,"tr",18),t.qZA(),t._UZ(28,"mat-paginator",19),t.qZA()()),2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,10,"NOTIFICATIONS")),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,12,c.dataSource.loading$)),t.xp6(5),t.s9C("placeholder",t.lcZ(14,14,"SEARCH_BY_DOCUMENT_NAME_OR_MESSAGE")),t.xp6(3),t.Q6J("dataSource",c.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",c.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("length",c.notificationResource.totalCount)("pageSize",c.notificationResource.pageSize)("pageSizeOptions",t.DdM(16,V)))},dependencies:[m.O5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,x.Ou,p.YE,p.nU,C.NW,m.Ov,m.uU,U.X$]}),e})(),canActivate:[g.a]}];let k=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.Bz.forChild(X),h.Bz]}),e})();var q=o(4107),tt=o(2368),et=o(7531),it=o(6845);let nt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,it.m,k,l.p0,x.Cq,q.LD,tt.rP,p.JX,C.TU,et.c]}),e})()}}]);