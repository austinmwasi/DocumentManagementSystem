"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[864],{6864:(et,g,o)=>{o.r(g),o.d(g,{LoginAuditModule:()=>it});var l=o(9808),a=o(2075),m=o(773),d=o(4847),r=o(6087),S=o(7531),p=o(2784),v=o(319),C=o(5519);class T extends C.r{constructor(){super(...arguments),this.id="",this.userName=""}}var Z=o(6787),x=o(3753),h=o(2868),R=o(13),y=o(5778),b=o(2676),c=o(591),N=o(1086),A=o(7221),U=o(537);class j{constructor(n){this.loginAuditService=n,this.loginAuditSubject=new c.X([]),this.responseHeaderSubject=new c.X(null),this.loadingSubject=new c.X(!1),this.loading$=this.loadingSubject.asObservable(),this._count=0,this.responseHeaderSubject$=this.responseHeaderSubject.asObservable()}get count(){return this._count}connect(){return this.loginAuditSubject.asObservable()}disconnect(){this.loginAuditSubject.complete(),this.loadingSubject.complete()}loadLoginAudits(n){this.loadingSubject.next(!0),this.loginAuditService.getLoginAudits(n).pipe((0,A.K)(()=>(0,N.of)([])),(0,U.x)(()=>this.loadingSubject.next(!1))).subscribe(e=>{const s=JSON.parse(e.headers.get("X-Pagination"));this.responseHeaderSubject.next(s);const u=[...e.body];this._count=u.length,this.loginAuditSubject.next(u)})}}var t=o(5e3),f=o(520),D=o(8032);let Y=(()=>{class i{constructor(e,s){this.httpClient=e,this.commonHttpErrorService=s}getLoginAudits(e){const u=(new f.LE).set("Fields",e.fields).set("OrderBy",e.orderBy).set("PageSize",e.pageSize.toString()).set("Skip",e.skip.toString()).set("SearchQuery",e.searchQuery).set("id",e.id.toString()).set("userName",e.userName.toString());return this.httpClient.get("LoginAudit",{params:u,observe:"response"}).pipe((0,A.K)(this.commonHttpErrorService.handleError))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(f.eN),t.LFG(D.U))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var L=o(2925);const I=["input"];function O(i,n){1&i&&(t.TgZ(0,"div",23),t._UZ(1,"mat-spinner"),t.qZA())}function z(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"DATE_TIME")," "))}function E(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"date"),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==e?null:e.loginTime,"dd/MM/yyyy hh:mm:ss a")," ")}}function H(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"EMAIL")," "))}function Q(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.userName," ")}}function B(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"STATUS")," "))}function M(i,n){if(1&i&&(t.TgZ(0,"span",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,null==e||null==e.status?null:e.status.toUpperCase()))}}function $(i,n){if(1&i&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,null==e||null==e.status?null:e.status.toUpperCase()))}}function w(i,n){if(1&i&&(t.TgZ(0,"td",25),t.YNc(1,M,3,3,"span",26),t.YNc(2,$,3,3,"span",27),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf","Success"==(null==e?null:e.status)),t.xp6(1),t.Q6J("ngIf","Error"==(null==e?null:e.status))}}function G(i,n){1&i&&(t.TgZ(0,"th",24),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"IP_ADDRESS")," "))}function J(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.remoteIP," ")}}function P(i,n){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij("",t.lcZ(2,1,"LATITUDE")," "))}function F(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.latitude," ")}}function X(i,n){1&i&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"LONGITUDE")," "))}function K(i,n){if(1&i&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.xp6(1),t.hij(" ",e.longitude," ")}}function W(i,n){1&i&&t._UZ(0,"tr",31)}function _(i,n){1&i&&t._UZ(0,"tr",32)}function q(i,n){1&i&&(t.TgZ(0,"tr")(1,"td")(2,"div",33)(3,"b"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()()),2&i&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"NO_DATA_FOUND"),""))}const V=function(){return[10,20,30]},k=[{path:"",component:(()=>{class i extends b.H{constructor(e){super(),this.loginAuditService=e,this.loginAudits=[],this.displayedColumns=["loginTime","userName","remoteIP","status","latitude","longitude"],this.isLoadingResults=!0,this.loginAuditResource=new T,this.loginAuditResource.pageSize=10,this.loginAuditResource.orderBy="loginTime desc"}ngOnInit(){this.dataSource=new j(this.loginAuditService),this.dataSource.loadLoginAudits(this.loginAuditResource),this.getResourceParameter()}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),this.sub$.sink=(0,Z.T)(this.sort.sortChange,this.paginator.page).pipe((0,h.b)(e=>{this.loginAuditResource.skip=this.paginator.pageIndex*this.paginator.pageSize,this.loginAuditResource.pageSize=this.paginator.pageSize,this.loginAuditResource.orderBy=this.sort.active+" "+this.sort.direction,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe(),this.sub$.sink=(0,x.R)(this.input.nativeElement,"keyup").pipe((0,R.b)(1e3),(0,y.x)(),(0,h.b)(()=>{this.paginator.pageIndex=0,this.loginAuditResource.skip=0,this.loginAuditResource.userName=this.input.nativeElement.value,this.dataSource.loadLoginAudits(this.loginAuditResource)})).subscribe()}getResourceParameter(){this.sub$.sink=this.dataSource.responseHeaderSubject$.subscribe(e=>{e&&(this.loginAuditResource.pageSize=e.pageSize,this.loginAuditResource.skip=e.skip,this.loginAuditResource.totalCount=e.totalCount)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Y))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login-audit-list"]],viewQuery:function(e,s){if(1&e&&(t.Gf(r.NW,5),t.Gf(d.YE,5),t.Gf(I,5)),2&e){let u;t.iGM(u=t.CRH())&&(s.paginator=u.first),t.iGM(u=t.CRH())&&(s.sort=u.first),t.iGM(u=t.CRH())&&(s.input=u.first)}},features:[t.qOj],decls:37,vars:17,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-container"],[1,"m-2","col-sm-5"],[1,"form-control",3,"placeholder"],["input",""],["mat-table","","matSort","","matSortActive","loginTime","matSortDirection","desc",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","loginTime"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","status"],["matColumnDef","remoteIP"],["matColumnDef","latitude"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","longitude"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"matNoDataRow"],[3,"length","pageSize","pageSizeOptions"],[1,"loading-shade"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","badge badge-success",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],[1,"badge","badge-success"],[1,"badge","badge-warning"],["mat-header-cell",""],["mat-header-row",""],["mat-row",""],[1,"pt-2","pl-3"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()(),t.TgZ(6,"div",3),t.YNc(7,O,2,0,"div",4),t.ALo(8,"async"),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"input",7,8),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"table",9),t.ynx(15,10),t.YNc(16,z,3,3,"th",11),t.YNc(17,E,3,4,"td",12),t.BQk(),t.ynx(18,13),t.YNc(19,H,3,3,"th",11),t.YNc(20,Q,2,1,"td",12),t.BQk(),t.ynx(21,14),t.YNc(22,B,3,3,"th",11),t.YNc(23,w,3,2,"td",12),t.BQk(),t.ynx(24,15),t.YNc(25,G,3,3,"th",11),t.YNc(26,J,2,1,"td",12),t.BQk(),t.ynx(27,16),t.YNc(28,P,3,3,"th",17),t.YNc(29,F,2,1,"td",12),t.BQk(),t.ynx(30,18),t.YNc(31,X,3,3,"th",17),t.YNc(32,K,2,1,"td",12),t.BQk(),t.YNc(33,W,1,0,"tr",19),t.YNc(34,_,1,0,"tr",20),t.YNc(35,q,6,3,"tr",21),t.qZA(),t._UZ(36,"mat-paginator",22),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,10,"LOGIN_AUDIT_LOGS")),t.xp6(3),t.Q6J("ngIf",t.lcZ(8,12,s.dataSource.loading$)),t.xp6(4),t.s9C("placeholder",t.lcZ(13,14,"SEARCH_BY_USERNAME")),t.xp6(3),t.Q6J("dataSource",s.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",s.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",s.displayedColumns),t.xp6(2),t.Q6J("length",s.loginAuditResource.totalCount)("pageSize",s.loginAuditResource.pageSize)("pageSizeOptions",t.DdM(16,V)))},dependencies:[l.O5,a.BZ,a.fO,a.as,a.w1,a.Dz,a.nj,a.ge,a.ev,a.XQ,a.Gk,a.Ee,m.Ou,d.YE,d.nU,r.NW,l.Ov,l.uU,L.X$],styles:[".badge[_ngcontent-%COMP%]{font-weight:400;padding:.5em .6em}"]}),i})(),data:{claimType:"login_audit_view_login_audit_logs"},canActivate:[v.a]}];let tt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[p.Bz.forChild(k),p.Bz]}),i})(),it=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[l.ez,a.p0,m.Cq,d.JX,r.TU,S.c,tt,L.aw]}),i})()}}]);