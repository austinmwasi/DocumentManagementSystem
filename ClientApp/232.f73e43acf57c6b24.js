"use strict";(self.webpackChunkdocument_management=self.webpackChunkdocument_management||[]).push([[232],{7232:(tt,N,a)=>{a.r(N),a.d(N,{UserModule:()=>ze});var p=a(9808),d=a(2784),h=a(319),c=a(3075),v=a(2676),e=a(5e3),g=a(1584),Z=a(2457),w=a(690),U=a(6107),F=a(7322),T=a(4107),O=a(508),C=a(9785),x=a(2925);function Y(t,i){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ADD_USER")))}function M(t,i){1&t&&(e.TgZ(0,"h2"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"EDIT_USER")))}function q(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME_IS_REQUIRED")," "))}function J(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,q,3,3,"div",20),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("firstName").errors?null:s.userForm.get("firstName").errors.required)}}function Q(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME_IS_REQUIRED")," "))}function D(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,Q,3,3,"div",20),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("lastName").errors?null:s.userForm.get("lastName").errors.required)}}function k(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_IS_REQUIRED")," "))}function y(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,k,3,3,"div",20),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("phoneNumber").errors?null:s.userForm.get("phoneNumber").errors.required)}}function $(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL_IS_REQUIRED")," "))}function j(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PLEASE_ENTER_VALID_EMAIL")," "))}function H(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,$,3,3,"div",20),e.YNc(2,j,3,3,"div",20),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("email").errors?null:s.userForm.get("email").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("email").errors?null:s.userForm.get("email").errors.email)}}function B(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function V(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function W(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,B,3,3,"div",20),e.YNc(2,V,3,3,"div",20),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("password").errors?null:s.userForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("password").errors?null:s.userForm.get("password").errors.minlength)}}function G(t,i){if(1&t&&(e.TgZ(0,"div",6)(1,"div",7)(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",22),e.YNc(6,W,3,2,"div",3),e.qZA()()),2&t){const s=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,2,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",s.userForm.get("password").touched&&s.userForm.get("password").errors)}}function K(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function X(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,K,3,3,"div",20),e.qZA()),2&t){const s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==s.userForm.get("confirmPassword").errors?null:s.userForm.get("confirmPassword").errors.required)}}function z(t,i){1&t&&(e.TgZ(0,"div",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}function ee(t,i){if(1&t&&(e.TgZ(0,"div",6)(1,"div",7)(2,"label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",23),e.YNc(6,X,2,1,"div",3),e.YNc(7,z,3,3,"div",20),e.qZA()()),2&t){const s=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"CONFIRM_PASSWORD")),e.xp6(3),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",s.userForm.get("confirmPassword").touched&&s.userForm.hasError("notSame"))}}function te(t,i){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",s.selectedRoles[0].name," ")}}function se(t,i){if(1&t&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.AsE(" (+",s.selectedRoles.length-1," ",2===s.selectedRoles.length?"other":"others",") ")}}function ne(t,i){if(1&t&&(e.TgZ(0,"mat-option",25),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.Q6J("value",s),e.xp6(1),e.Oqu(s.name)}}function ie(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(s);const o=e.oxw(2);return e.KtG(o.saveUser())}),e._UZ(1,"i",28),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function oe(t,i){1&t&&(e.ynx(0),e.YNc(1,ie,4,3,"button",26),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","user_edit_user"))}function re(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(s);const o=e.oxw(2);return e.KtG(o.saveUser())}),e._UZ(1,"i",28),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}function ae(t,i){1&t&&(e.ynx(0),e.YNc(1,re,4,3,"button",26),e.BQk()),2&t&&(e.xp6(1),e.Q6J("hasClaim","user_create_user"))}const ce=function(){return["/users"]};let b=(()=>{class t extends v.H{constructor(s,n,o,r,l,m,f){super(),this.fb=s,this.router=n,this.activeRoute=o,this.userService=r,this.toastrService=l,this.commonService=m,this.translationService=f,this.isEditMode=!1,this.selectedRoles=[]}ngOnInit(){this.createUserForm(),this.sub$.sink=this.activeRoute.data.subscribe(s=>{s.user?(this.isEditMode=!0,this.userForm.patchValue(s.user),this.user=s.user):(this.userForm.get("password").setValidators([c.kI.required,c.kI.minLength(6)]),this.userForm.get("confirmPassword").setValidators([c.kI.required]))}),this.getRoles()}createUserForm(){this.userForm=this.fb.group({id:[""],firstName:["",[c.kI.required]],lastName:["",[c.kI.required]],email:["",[c.kI.required,c.kI.email]],phoneNumber:["",[c.kI.required]],password:[""],confirmPassword:[""]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}saveUser(){if(this.userForm.valid){const s=this.createBuildObject();this.sub$.sink=this.isEditMode?this.userService.updateUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])}):this.userService.addUser(s).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_CREATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}else this.toastrService.error(this.translationService.getValue("PLEASE_ENTER_PROPER_DATA"))}createBuildObject(){return{id:this.userForm.get("id").value,firstName:this.userForm.get("firstName").value,lastName:this.userForm.get("lastName").value,email:this.userForm.get("email").value,phoneNumber:this.userForm.get("phoneNumber").value,password:this.userForm.get("password").value,userName:this.userForm.get("email").value,userRoles:this.getSelectedRoles()}}getSelectedRoles(){return this.selectedRoles.map(s=>({userId:this.userForm.get("id").value,roleId:s.id}))}getRoles(){this.sub$.sink=this.commonService.getRoles().subscribe(s=>{if(this.roleList=s,this.isEditMode){const n=this.user.userRoles.map(o=>o.roleId);this.selectedRoles=this.roleList.filter(o=>n.indexOf(o.id)>-1)}})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(c.QS),e.Y36(d.F0),e.Y36(d.gz),e.Y36(g.K),e.Y36(Z._W),e.Y36(w.v),e.Y36(U.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manage-user"]],features:[e.qOj],decls:53,vars:36,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["formControlName","firstName","type","text",1,"form-control"],["formControlName","lastName","type","text",1,"form-control"],["formControlName","phoneNumber","type","text",1,"form-control"],["formControlName","email","type","email",1,"form-control"],["class","col-md-6",4,"ngIf"],[1,"form-group","col-md-6"],["multiple","",1,"form-control",3,"value","valueChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"m-top-10","col-md-12"],["type","button",1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"las","la-times-circle"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],[1,"example-additional-selection"],[3,"value"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Y,3,3,"h2",3),e.YNc(4,M,3,3,"h2",3),e.qZA()()(),e.TgZ(5,"form",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",8),e.YNc(13,J,2,1,"div",3),e.qZA()(),e.TgZ(14,"div",6)(15,"div",7)(16,"label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",9),e.YNc(20,D,2,1,"div",3),e.qZA()(),e.TgZ(21,"div",6)(22,"div",7)(23,"label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",10),e.YNc(27,y,2,1,"div",3),e.qZA()(),e.TgZ(28,"div",6)(29,"div",7)(30,"label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",11),e.YNc(34,H,3,2,"div",3),e.qZA()(),e.YNc(35,G,7,4,"div",12),e.YNc(36,ee,8,5,"div",12),e.TgZ(37,"div",13)(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"mat-select",14),e.NdJ("valueChange",function(r){return n.selectedRoles=r}),e.TgZ(42,"mat-select-trigger"),e.YNc(43,te,2,1,"span",3),e.YNc(44,se,2,2,"span",15),e.qZA(),e.YNc(45,ne,2,2,"mat-option",16),e.qZA()(),e.TgZ(46,"div",17),e.YNc(47,oe,2,1,"ng-container",3),e.YNc(48,ae,2,1,"ng-container",3),e.TgZ(49,"button",18),e._UZ(50,"i",19),e._uU(51),e.ALo(52,"translate"),e.qZA()()()()),2&s&&(e.xp6(3),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",n.isEditMode),e.xp6(1),e.Q6J("formGroup",n.userForm),e.xp6(5),e.Oqu(e.lcZ(11,23,"FIRST_NAME")),e.xp6(3),e.Q6J("ngIf",n.userForm.get("firstName").touched&&n.userForm.get("firstName").errors),e.xp6(4),e.Oqu(e.lcZ(18,25,"LAST_NAME")),e.xp6(3),e.Q6J("ngIf",n.userForm.get("lastName").touched&&n.userForm.get("lastName").errors),e.xp6(4),e.Oqu(e.lcZ(25,27,"MOBILE_NUMBER")),e.xp6(3),e.Q6J("ngIf",n.userForm.get("phoneNumber").touched&&n.userForm.get("phoneNumber").errors),e.xp6(4),e.Oqu(e.lcZ(32,29,"EMAIL")),e.xp6(2),e.uIk("disabled",n.isEditMode?"":null),e.xp6(1),e.Q6J("ngIf",n.userForm.get("email").touched&&n.userForm.get("email").errors),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(3),e.Oqu(e.lcZ(40,31,"ROLES")),e.xp6(2),e.Q6J("value",n.selectedRoles),e.xp6(2),e.Q6J("ngIf",n.selectedRoles.length>0),e.xp6(1),e.Q6J("ngIf",n.selectedRoles.length>1),e.xp6(1),e.Q6J("ngForOf",n.roleList),e.xp6(2),e.Q6J("ngIf",n.isEditMode),e.xp6(1),e.Q6J("ngIf",!n.isEditMode),e.xp6(1),e.Q6J("routerLink",e.DdM(35,ce)),e.xp6(2),e.hij(" ",e.lcZ(52,33,"CANCEL"),""))},dependencies:[p.sg,p.O5,d.rH,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,F.hX,T.gD,T.$L,O.ey,C.d,x.X$],styles:[".example-additional-selection[_ngcontent-%COMP%]{opacity:.75;font-size:.75em}"]}),t})(),S=(()=>{class t{constructor(s){this.userService=s}resolve(s,n){const o=s.paramMap.get("id");return this.userService.getUser(o)}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(g.K))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var _=a(2349);function le(t,i){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORD_IS_REQUIRED")," "))}function me(t,i){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"YOU_HAVE_TO_ENTER_AT_LEAST_DIGIT")," "))}function ue(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,le,3,3,"div",9),e.YNc(2,me,3,3,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.required),e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("password").errors?null:s.resetPasswordForm.get("password").errors.minlength)}}function de(t,i){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIRM_PASSWORD_IS_REQUIRED")," "))}function pe(t,i){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,de,3,3,"div",9),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.resetPasswordForm.get("confirmPassword").errors?null:s.resetPasswordForm.get("confirmPassword").errors.required)}}function _e(t,i){1&t&&(e.TgZ(0,"div",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PASSWORDS_DO_NOT_MATCH")," "))}let ge=(()=>{class t extends v.H{constructor(s,n,o,r,l,m){super(),this.userService=s,this.fb=n,this.dialogRef=o,this.data=r,this.toastrService=l,this.translationService=m}ngOnInit(){this.createResetPasswordForm(),this.resetPasswordForm.get("email").setValue(this.data.userName)}createResetPasswordForm(){this.resetPasswordForm=this.fb.group({email:[],password:["",[c.kI.required,c.kI.minLength(6)]],confirmPassword:["",[c.kI.required]]},{validator:this.checkPasswords})}checkPasswords(s){return s.get("password").value===s.get("confirmPassword").value?null:{notSame:!0}}resetPassword(){this.resetPasswordForm.valid&&(this.sub$.sink=this.userService.resetPassword(this.createBuildObject()).subscribe(s=>{this.toastrService.success(this.translationService.getValue("SUCCESSFULLY_RESET_PASSWORD")),this.dialogRef.close()}))}createBuildObject(){return{email:"",password:this.resetPasswordForm.get("password").value,userName:this.resetPasswordForm.get("email").value}}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(g.K),e.Y36(c.QS),e.Y36(_.so),e.Y36(_.WI),e.Y36(Z._W),e.Y36(U.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-reset-password"]],features:[e.qOj],decls:35,vars:23,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"col-md-12"],[1,"form-group"],["formControlName","email","type","email",1,"form-control"],["autocomplete","new-password","formControlName","password","type","password",1,"form-control"],[4,"ngIf"],["autocomplete","new-password","formControlName","confirmPassword","type","password",1,"form-control"],["class","text-danger",4,"ngIf"],["mat-dialog-actions",""],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"las","la-times-circle"],[1,"text-danger"]],template:function(s,n){1&s&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"form",2)(5,"div",3)(6,"div",4)(7,"label"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"input",5),e.qZA()(),e.TgZ(11,"div",3)(12,"div",4)(13,"label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",6),e.YNc(17,ue,3,2,"div",7),e.qZA()(),e.TgZ(18,"div",3)(19,"div",4)(20,"label"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"input",8),e.YNc(24,pe,2,1,"div",7),e.YNc(25,_e,3,3,"div",9),e.qZA()()()(),e.TgZ(26,"div",10)(27,"button",11),e.NdJ("click",function(){return n.resetPassword()}),e._UZ(28,"i",12),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"button",13),e.NdJ("click",function(){return n.onNoClick()}),e._UZ(32,"i",14),e._uU(33),e.ALo(34,"translate"),e.qZA()()),2&s&&(e.xp6(1),e.Oqu(e.lcZ(2,11,"RESET_PASSWORD")),e.xp6(3),e.Q6J("formGroup",n.resetPasswordForm),e.xp6(4),e.Oqu(e.lcZ(9,13,"EMAIL")),e.xp6(2),e.uIk("disabled",!0),e.xp6(4),e.Oqu(e.lcZ(15,15,"PASSWORD")),e.xp6(3),e.Q6J("ngIf",n.resetPasswordForm.get("password").touched&&n.resetPasswordForm.get("password").errors),e.xp6(4),e.Oqu(e.lcZ(22,17,"CONFIRM_PASSWORD")),e.xp6(3),e.Q6J("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.get("confirmPassword").errors),e.xp6(1),e.Q6J("ngIf",n.resetPasswordForm.get("confirmPassword").touched&&n.resetPasswordForm.hasError("notSame")),e.xp6(4),e.hij(" ",e.lcZ(30,19,"SAVE"),""),e.xp6(4),e.hij(" ",e.lcZ(34,21,"CANCEL"),""))},dependencies:[p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,_.uh,_.xY,_.H8,x.X$]}),t})();var fe=a(5485),u=a(2075),L=a(773),A=a(2181),I=a(7423),E=a(5245);const he=function(){return["/users/manage"]};function ve(t,i){1&t&&(e.TgZ(0,"button",18),e._UZ(1,"i",19),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&t&&(e.Q6J("routerLink",e.DdM(4,he)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"ADD_USER")," "))}function Ze(t,i){1&t&&e._UZ(0,"mat-spinner")}function Ue(t,i){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,Ze,1,0,"mat-spinner",21),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",s.isLoadingResults)}}function xe(t,i){1&t&&(e.TgZ(0,"th",22)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"ACTION")," "))}function Ae(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.editUser(o.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"EDIT")," "))}function Te(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.deleteUser(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"DELETE")," "))}function Ce(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.userPermission(o.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"people"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"PERMISSION")," "))}function Se(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(s);const o=e.oxw().$implicit,r=e.oxw();return e.KtG(r.resetPassword(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"key"),e.qZA(),e._uU(3),e.ALo(4,"translate"),e.qZA()}2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"RESET_PASSWORD")," "))}function Ne(t,i){if(1&t&&(e.TgZ(0,"td",23)(1,"button",24)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,25),e.YNc(6,Ae,5,3,"button",26),e.YNc(7,Te,5,3,"button",27),e.YNc(8,Ce,5,3,"button",27),e.YNc(9,Se,5,3,"button",27),e.qZA()()),2&t){const s=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",s),e.xp6(5),e.Q6J("hasClaim","user_edit_user"),e.xp6(1),e.Q6J("hasClaim","user_delete_user"),e.xp6(1),e.Q6J("hasClaim","user_assign_permission"),e.xp6(1),e.Q6J("hasClaim","user_reset_password")}}function we(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMAIL")," "))}function be(t,i){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.email," ")}}function Le(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRST_NAME")," "))}function Ie(t,i){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.firstName," ")}}function Ee(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LAST_NAME")," "))}function Pe(t,i){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.lastName," ")}}function Re(t,i){1&t&&(e.TgZ(0,"th",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"MOBILE_NUMBER")," "))}function Fe(t,i){if(1&t&&(e.TgZ(0,"td",23),e._uU(1),e.qZA()),2&t){const s=i.$implicit;e.xp6(1),e.hij(" ",s.phoneNumber," ")}}function Oe(t,i){1&t&&e._UZ(0,"tr",29)}function Ye(t,i){1&t&&e._UZ(0,"tr",30)}let Me=(()=>{class t extends v.H{constructor(s,n,o,r,l,m,f){super(),this.userService=s,this.toastrService=n,this.commonService=o,this.commonDialogService=r,this.dialog=l,this.router=m,this.translationService=f,this.users=[],this.displayedColumns=["action","email","firstName","lastName","phoneNumber"],this.isLoadingResults=!0}ngOnInit(){this.getUsers()}deleteUser(s){this.sub$.sink=this.commonDialogService.deleteConformationDialog(`${this.translationService.getValue("ARE_YOU_SURE_YOU_WANT_TO_DELETE")} ${s.userName}`).subscribe(n=>{n&&(this.sub$.sink=this.userService.deleteUser(s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_DELETED_SUCCESSFULLY")),this.getUsers()}))})}getUsers(){this.isLoadingResults=!0,this.sub$.sink=this.commonService.getUsers().subscribe(s=>{this.isLoadingResults=!1,this.users=s},s=>{s.messages.forEach(n=>{this.toastrService.error(n),this.isLoadingResults=!1})})}resetPassword(s){this.dialog.open(ge,{width:"350px",data:Object.assign({},s)})}editUser(s){this.router.navigate(["/users/manage",s])}userPermission(s){this.router.navigate(["/users/permission",s])}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(g.K),e.Y36(Z._W),e.Y36(w.v),e.Y36(fe.V),e.Y36(_.uw),e.Y36(d.F0),e.Y36(U.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-list"]],features:[e.qOj],decls:30,vars:9,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"widget-title"],["class","btn btn-success btn-sm m-right-10",3,"routerLink",4,"hasClaim"],[1,"mat-elevation-z8"],["class","loading-shade",4,"ngIf"],[1,"table-container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","phoneNumber"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"btn","btn-success","btn-sm","m-right-10",3,"routerLink"],[1,"las","la-plus"],[1,"loading-shade"],[4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","aria-label","Action",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","class","btn btn-light btn-sm",3,"click",4,"hasClaim"],["class","btn btn-light btn-sm","mat-menu-item","",3,"click",4,"hasClaim"],["mat-menu-item","",1,"btn","btn-light","btn-sm",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",1)(7,"h4",3),e.YNc(8,ve,4,5,"button",4),e.qZA()()(),e.TgZ(9,"div",5),e.YNc(10,Ue,2,1,"div",6),e.TgZ(11,"div",7)(12,"table",8),e.ynx(13,9),e.YNc(14,xe,4,3,"th",10),e.YNc(15,Ne,10,5,"td",11),e.BQk(),e.ynx(16,12),e.YNc(17,we,3,3,"th",10),e.YNc(18,be,2,1,"td",11),e.BQk(),e.ynx(19,13),e.YNc(20,Le,3,3,"th",10),e.YNc(21,Ie,2,1,"td",11),e.BQk(),e.ynx(22,14),e.YNc(23,Ee,3,3,"th",10),e.YNc(24,Pe,2,1,"td",11),e.BQk(),e.ynx(25,15),e.YNc(26,Re,3,3,"th",10),e.YNc(27,Fe,2,1,"td",11),e.BQk(),e.YNc(28,Oe,1,0,"tr",16),e.YNc(29,Ye,1,0,"tr",17),e.qZA()()()),2&s&&(e.xp6(4),e.Oqu(e.lcZ(5,7,"USERS")),e.xp6(4),e.Q6J("hasClaim","user_create_user"),e.xp6(2),e.Q6J("ngIf",n.isLoadingResults),e.xp6(2),e.Q6J("dataSource",n.users),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[p.O5,d.rH,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,L.Ou,C.d,A.VK,A.OP,A.p6,I.lW,E.Hw,x.X$]}),t})();var P=a(2868),qe=a(38),Je=a(4479),Qe=a(2328),R=a(7446);function De(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",20)(1,"mat-checkbox",21),e.NdJ("change",function(o){e.CHM(s);const r=e.oxw().$implicit,l=e.oxw().$implicit,m=e.oxw();return e.KtG(m.onPermissionChange(o,l,r))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&t){const s=e.oxw().$implicit,n=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("checked",o.checkPermission(n.id,s.id)),e.xp6(1),e.hij(" ",e.lcZ(3,2,s.name.replaceAll(" ","_").toUpperCase())," ")}}function ke(t,i){if(1&t&&(e.ynx(0),e.YNc(1,De,4,4,"div",19),e.BQk()),2&t){const s=i.$implicit,n=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.checkPageAction(n.id,s.id))}}function ye(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"mat-checkbox",16),e.NdJ("change",function(o){const l=e.CHM(s).$implicit,m=e.oxw();return e.KtG(m.onPageSelect(o,l.name))}),e.TgZ(3,"b"),e._uU(4),e.ALo(5,"translate"),e.qZA()()(),e.TgZ(6,"div",17),e.YNc(7,ke,2,1,"ng-container",18),e.qZA()()}if(2&t){const s=i.$implicit,n=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,2,s.name.replaceAll(" ","_").toUpperCase()),""),e.xp6(3),e.Q6J("ngForOf",n.operations)}}function $e(t,i){if(1&t){const s=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(s);const o=e.oxw();return e.KtG(o.saveUserClaim())}),e._UZ(1,"i",23),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SAVE"),""))}const je=function(){return["/users"]};let He=(()=>{class t{constructor(){this.manageUserClaimOperation=new e.vpe,this.step=0}ngOnInit(){}checkPageAction(s,n){return!!this.screenOperations.find(r=>r.screenId===s&&r.operationId===n)}onPageSelect(s,n){if(s.checked)this.screens.filter(r=>r.name==n).forEach(r=>{this.operations.forEach(l=>{this.checkPageAction(r.id,l.id)&&this.user.userClaims.push({userId:this.user.id,claimType:`${r.name}_${l.name}`,claimValue:"",screenId:r.id,operationId:l.id})})});else{var o=this.screens.find(r=>r.name==n);this.user.userClaims=this.user.userClaims.filter(r=>r.screenId!=o.id)}}checkPermission(s,n){return!!this.user.userClaims.find(r=>r.screenId===s&&r.operationId===n)}onPermissionChange(s,n,o){if(s.checked)this.user.userClaims.push({userId:this.user.id,claimType:`${n.name}_${o.name}`,claimValue:"",screenId:n.id,operationId:o.id});else{const r=this.user.userClaims.find(m=>m.operationId===o.id&&m.screenId===n.id),l=this.user.userClaims.indexOf(r,0);l>-1&&this.user.userClaims.splice(l,1)}}saveUserClaim(){this.manageUserClaimOperation.emit(this.user)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission-presentation"]],inputs:{screens:"screens",operations:"operations",screenOperations:"screenOperations",loading:"loading",loadingScreen:"loadingScreen",loadingOperation:"loadingOperation",user:"user"},outputs:{manageUserClaimOperation:"manageUserClaimOperation"},decls:23,vars:15,consts:[[1,"row","mb-3","align-items-center","justify-content-between"],[1,"col-md-auto","col-sm-auto"],[1,"section-title"],[1,"text-info"],[1,"row","align-items-center"],[1,"col-md-4","col-sm-12"],[1,"widget-title"],[1,"row"],[1,"col-sm-12"],["fxLayout","row wrap",4,"ngFor","ngForOf"],[1,"m-top-10"],["class","btn btn-success btn-sm m-right-10","cdkFocusInitial","",3,"click",4,"hasClaim"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"las","la-times-circle"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.sm","100"],["color","primary",3,"change"],[1,"row","ml-2"],[4,"ngFor","ngForOf"],["class","col-sm-3",4,"ngIf"],[1,"col-sm-3"],["color","primary",3,"checked","change"],["cdkFocusInitial","",1,"btn","btn-success","btn-sm","m-right-10",3,"click"],[1,"las","la-save"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"span",3),e._uU(7),e.qZA()()()()(),e.TgZ(8,"div")(9,"div",4)(10,"div",5)(11,"h1",6),e._uU(12),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",7)(15,"div",8),e.YNc(16,ye,8,4,"div",9),e.qZA()()(),e.TgZ(17,"div",10),e.YNc(18,$e,4,3,"button",11),e.TgZ(19,"a",12),e._UZ(20,"i",13),e._uU(21),e.ALo(22,"translate"),e.qZA()()),2&s&&(e.xp6(4),e.hij("",e.lcZ(5,8,"USER_PAGE_PERMISSION_TO")," : "),e.xp6(3),e.AsE("",null==n.user?null:n.user.firstName," ",null==n.user?null:n.user.lastName,""),e.xp6(5),e.Oqu(e.lcZ(13,10,"PERMISSION")),e.xp6(4),e.Q6J("ngForOf",n.screens),e.xp6(2),e.Q6J("hasClaim","user_assign_permission"),e.xp6(1),e.Q6J("routerLink",e.DdM(14,je)),e.xp6(2),e.hij(" ",e.lcZ(22,12,"CANCEL"),""))},dependencies:[p.sg,p.O5,d.yS,C.d,R.oG,x.X$]}),t})();const Ve=[{path:"",component:Me,data:{claimType:"user_view_users"},canActivate:[h.a]},{path:"manage/:id",component:b,resolve:{user:S},data:{claimType:"user_edit_user"},canActivate:[h.a]},{path:"manage",component:b,data:{claimType:"user_create_user"},canActivate:[h.a]},{path:"permission/:id",component:(()=>{class t extends v.H{constructor(s,n,o,r,l,m,f,et){super(),this.activeRoute=s,this.router=n,this.toastrService=o,this.screenService=r,this.operationService=l,this.screenOperationService=m,this.userService=f,this.translationService=et}ngOnInit(){this.sub$.sink=this.activeRoute.data.subscribe(s=>{this.user=s.user}),this.loadingOperation$=this.operationService.loaded$.pipe((0,P.b)(s=>{s||this.getOperations()})),this.operations$=this.operationService.entities$,this.loadingScreen$=this.screenService.loaded$.pipe((0,P.b)(s=>{s||this.getScreens()})),this.screens$=this.screenService.entities$,this.loading$=this.screenOperationService.loaded$,this.screenOperations$=this.screenOperationService.entities$,this.getScreenOperations()}getOperations(){this.operationService.getAll()}getScreens(){this.screenService.getAll()}getScreenOperations(){this.screenOperationService.getAll()}manageUserClaimOperation(s){this.sub$.sink=this.userService.updateUserClaim(s.userClaims,s.id).subscribe(()=>{this.toastrService.success(this.translationService.getValue("USER_PERMISSION_UPDATED_SUCCESSFULLY")),this.router.navigate(["/users"])})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(d.gz),e.Y36(d.F0),e.Y36(Z._W),e.Y36(qe.H),e.Y36(Je.f),e.Y36(Qe.h),e.Y36(g.K),e.Y36(U.D))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-permission"]],features:[e.qOj],decls:7,vars:19,consts:[[3,"screens","operations","screenOperations","loading","loadingScreen","loadingOperation","user","manageUserClaimOperation"]],template:function(s,n){1&s&&(e.TgZ(0,"app-user-permission-presentation",0),e.NdJ("manageUserClaimOperation",function(r){return n.manageUserClaimOperation(r)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.qZA()),2&s&&e.Q6J("screens",e.lcZ(1,7,n.screens$))("operations",e.lcZ(2,9,n.operations$))("screenOperations",e.lcZ(3,11,n.screenOperations$))("loading",e.lcZ(4,13,n.loading$))("loadingScreen",e.lcZ(5,15,n.loadingScreen$))("loadingOperation",e.lcZ(6,17,n.loadingOperation$))("user",n.user)},dependencies:[He,p.Ov]}),t})(),resolve:{user:S},data:{claimType:"user_assign_permission"},canActivate:[h.a]}];let We=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.Bz.forChild(Ve),d.Bz]}),t})();var Ge=a(2368),Ke=a(6845),Xe=a(1125);let ze=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[S],imports:[p.ez,We,c.u5,c.UX,u.p0,L.Cq,_.Is,T.LD,Ge.rP,Ke.m,A.Tx,I.ot,Xe.To,R.p9,E.Ps]}),t})()}}]);